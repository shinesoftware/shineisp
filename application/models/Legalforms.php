<?php

/**
 * Legalforms
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ##PACKAGE##
 * @subpackage ##SUBPACKAGE##
 * @author     ##NAME## <##EMAIL##>
 * @version    SVN: $Id: Builder.php 6820 2009-11-30 17:27:49Z jwage $
 */
class Legalforms extends BaseLegalforms {

	/**
	 * create the configuration of the grid
	 */
	public static function grid($rowNum = 10) {
	
		$translator = Zend_Registry::getInstance ()->Zend_Translate;
	
		$config ['datagrid'] ['columns'] [] = array ('label' => null, 'field' => 't.legalform_id', 'alias' => 'legalform_id', 'type' => 'selectall' );
		$config ['datagrid'] ['columns'] [] = array ('label' => $translator->translate ( 'ID' ), 'field' => 'l.legalform_id', 'alias' => 'legalform_id', 'sortable' => true, 'searchable' => true, 'type' => 'string' );
		$config ['datagrid'] ['columns'] [] = array ('label' => $translator->translate ( 'Name' ), 'field' => 'l.name', 'alias' => 'name', 'sortable' => true, 'searchable' => true, 'type' => 'string' );
	
		$config ['datagrid'] ['fields'] = "legalform_id, name";
		$config ['datagrid'] ['dqrecordset'] = Doctrine_Query::create ()->select ( $config ['datagrid'] ['fields'] )->from ( 'Legalforms l' );
	
		$config ['datagrid'] ['rownum'] = $rowNum;
	
		$config ['datagrid'] ['basepath'] = "/admin/legalform/";
		$config ['datagrid'] ['index'] = "legalform_id";
		$config ['datagrid'] ['rowlist'] = array ('10', '50', '100', '1000' );
	
		$config ['datagrid'] ['buttons'] ['edit'] ['label'] = $translator->translate ( 'Edit' );
		$config ['datagrid'] ['buttons'] ['edit'] ['cssicon'] = "edit";
		$config ['datagrid'] ['buttons'] ['edit'] ['action'] = "/admin/legalform/edit/id/%d";
	
		$config ['datagrid'] ['buttons'] ['delete'] ['label'] = $translator->translate ( 'Delete' );
		$config ['datagrid'] ['buttons'] ['delete'] ['cssicon'] = "delete";
		$config ['datagrid'] ['buttons'] ['delete'] ['action'] = "/admin/legalform/delete/id/%d";
		return $config;
	}

	/**
	 * Delete a record by ID
	 * @param $id
	 */
	public static function deleteItem($id) {
		Doctrine::getTable ( 'Legalforms' )->findOneBy ( 'legalform_id', $id )->delete();
	}

	/**
	 *
	 * @param unknown_type $id
	 * @return Ambigous <Doctrine_Record, mixed, boolean, Doctrine_Collection, PDOStatement, Doctrine_Adapter_Statement, Doctrine_Connection_Statement, unknown, number>
	 */
	public static function find($id) {
		return Doctrine::getTable ( 'Legalforms' )->findOneBy ( 'legalform_id', $id );
	}
	
	/**
	 * Get a record by ID
	 * 
	 * @param $id
	 * @return Doctrine Record
	 */
	public static function getById($id, $fields = "*", $retarray = false) {
		$dq = Doctrine_Query::create ()->select ( $fields )
		->from ( 'Legalforms t' )
		->where ( "t.legalform_id = ?", $id )
		->limit ( 1 );
	
		$retarray = $retarray ? Doctrine_Core::HYDRATE_ARRAY : null;
		$record = $dq->execute ( array (), $retarray );
		return $record;
	}
	
	/**
	 * Get a record by its name
	 * @param string $name
	 * @return Ambigous <Doctrine_Record, mixed, boolean, Doctrine_Collection, PDOStatement, Doctrine_Adapter_Statement, Doctrine_Connection_Statement, unknown, number>
	 */
	public static function findbyName($name) {
		return Doctrine::getTable ( 'Legalforms' )->findOneBy ( 'name', $name );
	}
	
	/**
	 * Get the id record by its name
	 * @param unknown_type $name
	 * @return NULL
	 */
	public static function getIDbyName($name) {
		if (empty ( $name )) {
			return null;
		}
		$legalform = Doctrine::getTable ( 'Legalforms' )->findOneBy ( 'name', $name );
		$legalform = ! empty ( $legalform ) ? $legalform->toArray () : array ();
		return ! empty ( $legalform ['legalform_id'] ) ? $legalform ['legalform_id'] : null;
	}
	

	/**
	 * Save the record
	 *
	 * @param posted var from the form
	 * @return Boolean
	 */
	public static function saveData($record, $id=null) {
	
		// Set the new values
		if (is_numeric ( $id )) {
			$legalform = self::find( $id );
		}else{
			$legalform = new Legalforms();
		}
	
		$legalform->name = $record ['name'];
	
		if($legalform->trySave()){
			return $legalform->legalform_id;
		}
	
		return false;
	}
	
	/**
	 * Get the list of the records ready for the select object
	 * 
	 * @param boolean $emptyitem
	 * @return multitype:string unknown
	 */
	public static function getList($emptyitem=false) {
		$items = array ();
		if($emptyitem){
			$items[] = "";
		}
		
		$arrTypes = Doctrine::getTable ( 'Legalforms' )->findAll ();
		foreach ( $arrTypes->getData () as $c ) {
			$items [$c ['legalform_id']] = $c ['name'];
		}
		return $items;
	}

}